(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=global||self,factory(global.burla={}))})(this,function(exports){"use strict";const URL=(loc=window.location,{stable:stable=true}={})=>{if(typeof loc==="string"){loc=new window.URL(loc)}const retrieve=()=>{const path=loc.pathname||"/";const params=new URLSearchParams(loc.search.slice(1));const query=obj=>{update({query:{...query,...obj}})};for(const[key,value]of params.entries()){if(/\[\]$/.test(key)){throw new Error("Arrays in queries are not supported")}if(query[key]){throw new Error(`The URL query param '${key}' is duplicated`)}query[key]=value}const hash=(loc.hash||"").replace(/^#/,"");return{path:path,query:query,hash:hash}};const enc=encodeURIComponent;const toString=({path:path,query:query,hash:hash})=>{query=Object.entries(query).sort(([a],[b])=>{if(!stable)return 0;if(a<b)return-1;if(a>b)return 1;return 0}).map(([key,value])=>`${enc(key)}=${enc(value)}`).join("&");query=query?`?${query.replace(/^\?/,"")}`:"";hash=hash?`#${hash.replace(/^#/,"")}`:"";return loc.origin+path+query+hash};const update=data=>{const url=toString({...retrieve(),...data});if(loc===window.location){window.history.pushState({url:url},null,url)}};return{URL:URL,get path(){return retrieve().path},set path(path){update({path:path})},get pathname(){return retrieve().path},set pathname(path){update({path:path})},get href(){return toString(retrieve())},get hash(){return retrieve().hash},set hash(hash){update({hash:hash})},toString:()=>{return toString(retrieve())},query:new Proxy(retrieve().query,{get:(orig,key)=>retrieve().query[key],set:(orig,key,value)=>{const query=retrieve().query;update({query:{...query,[key]:value}});return true},deleteProperty:(orig,key)=>{const{[key]:abc,...query}=retrieve().query;update({query:query});return true}})}};var index=URL(window.location);exports.URL=URL;exports.default=index;Object.defineProperty(exports,"__esModule",{value:true})});